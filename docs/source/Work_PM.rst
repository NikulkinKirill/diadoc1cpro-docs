
Работа подключаемого модуля
===========================

Подключаемый модуль (ПМ) - это вспомогательная внешняя обработка, содержащая функции для обработки событий, зависящих от конфигурации 1С и бизнес-процессов организации.

Краткое описание
----------------

События подключаемого модуля
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

К событиям подключаемого модуля относятся действия, которые:

- собирают данные из конфигурации 1С для их отправки на сервер Диадока
- обрабатывают полученные с сервера Диадок данные для их регистрации в базе 1С. Например, создание документа, регистрирующего поступление товаров на основании входящего УПД.

Точкой входа из основного модуля в подключаемый модуль является функция :doc:`ОбработатьСобытие <Obrabotat'Sobytiye>`.

Обращение к необходимой функции происходит через условие "Если"

::

  Если ИмяСобытия = "ПолучитьТекстЗапросаДляСпискаПакетовНаОтправкуПоМассивуВидовПакетов" Тогда

    Возврат ПолучитьТекстЗапросаДляСпискаПакетовНаОтправкуПоМассивуВидовПакетов(Параметры.МассивВидовПакетов);

Вызов в основном модуле происходит с использование процедуры ЭДО_ПодключаемыйМодуль_ОбработатьСобытие.

::

      Параметры = Новый Структура("ВидПакетаРазвернутый,СтрокаСписка,Пакет", ВидПакетаРазвернутый, СтрокаСписка, Пакет);
      ЭДО_ПодключаемыйМодуль_ОбработатьСобытие("ПодготовитьПакет", Параметры);

Возможности подключаемого модуля
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для типовых конфигураций в модуле описаны основные действия для работы с событиями пакетов документов:

* сбор документов 1С в один вид пакета
* заполнение контента на основании данных из 1С для отправки пакета
* логика сопоставления и создания документов в 1С


Кроме того, в ПМ можно описать функции для прочих действий, в том числе связанных со списком документов в основной форме:

* логика необходимого анализа входящих документов согласно бизнес-процессам организации
* действия после обновления списка документов
* выполнение регламентного задания
* сопоставление номенклатуры
* действия дополнительных кнопок и т.д.

Расположение подключаемого модуля
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Типовые ПМ для основных конфигураций 1С распологаются в макетах основного модуля.

В настройках основной обработки модуля Диадок есть возможность указать путь к доработанному ПМ, что упрощает настройку системы под бизнес-процессы каждого клиента.

.. figure:: _static/Nastroyka_ispolzovaniya_PM.png
       :scale: 100 %
       :align: center
       :alt: Настройка использования подключаемого модуля

Примеры использования подключаемого модуля
------------------------------------------

.. toctree::
  :name: ПМ
  :maxdepth: 1

  Как подготовить пакет документов для отправки <Podgotovka_Paketa_Dlya_Otpravki>
