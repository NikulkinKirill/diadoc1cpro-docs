
Структура "Документ"
====================

Используется в модуле с версии 4.0. На текущий момент доступна в ряде событие подключаемого модуля:

* :doc:`ВыполнитьТребуемоеДействие <../func/pm/Vypolnit'_Trebuyemoye_Deystviye>`
* :doc:`ПровестиАнализДокумента <../func/pm/Provesti_Analiz_Dokumenta>`
* :doc:`НайтиСопоставлениеДокумента <../func/pm/Nayti_Sopostavleniye_Dokumenta>`
* :doc:`ПолучитьЗаполненныйОбъектДокумента1С <../func/pm/Poluchit'_Zapolnennyy_Obyekt_Dokumenta_1S>`

*Элементы:*

* **ДатаЭДО** (тип Дата) - дата создания документа на сервере Диадока
* **ДокументУчета** (тип ДокументСсылка, СправочникСсылка)- ссылка на документ в 1С, который сопоставлен с данным электронным документом
* **Документооборот** (тип Структура) - содержит структуры, содержащие описание контента, титул покупателя и т.п. Используется внутри модуля
* **ДопРеквизиты** (тип Структура) - дополнительных данных любого типа. Допустимо использование не более 5 реквизитов
* **Заблокирован** (тип Булево) - признак того, что документ находится в составе заблокированного пакета. В таком пакете любая операция применяется ко всем документам сразу
* **ИдентификаторВида** (тип Строка) - ID документа из события :doc:`ПолучитьТаблицуИспользуемыхВидовДокументов <../func/pm/Poluchit'TablitsuIspol'zuyemykhVidovDokumentov>`
* **ИдентификаторВидаПакета** (тип Строка) - ID пакета из события :doc:`ПолучитьТаблицуИспользуемыхПакетов <../func/pm/Poluchit'TablitsuIspol'zuyemykhPaketov>`
* **Идентификаторы** (тип Структура) - идентификаторы на сервере Диадока, характеризующие документ
* **ИмяФайла** (тип Строка) - имя файла из метаданных документа
* **Ключ** (тип Строка) - уникальный идентификатор структуры документа
* **Метаданные** (тип Структура) - метаданных документа. Состав зависит от :doc:`типа контента <Tipy_Kontenta>` документа
* **Направление** (тип Строка) - принимает значение "Исходящее" / "Входящее"
* **Отправитель** (тип Структура) - структура, описывающая участника ЭДО, от которого был отправлен пакет
* **ПараметрыШаблона** (тип Структура) - идентификаторы на сервере Диадока, характеризующие документ из пакета-шаблона
* **Получатель** (тип Структура) - структура, описывающая участника ЭДО, который получил пакет
* **РезультатАнализа** (тип Структура) - содержит итоги анализа, выполненного в событии :doc:`ПровестиАнализДокумента <../func/pm/Provesti_Analiz_Dokumenta>` или :doc:`ПослеАнализаПакета <../func/pm/Posle_Analiza_Paketa>`
* **Реквизиты** (тип Структура) - основные реквизитов документа
* **Связи** (тип Структура) - идентификаторы документов из других пакетов, которые связаны с текущим документом
* **СлужебнаяИнформация** (тип Структура) - вспомогательная структура, содержащая временные переменные
* **Состояние** (тип Строка) - метка документа. Принимает значение "Подготовлен" / "Отправлен" / "ЗагруженИзДиадок" / "Получен" / "Переотправлен"
* **Статусы** (тип Структура) - состоит из статуса и дополнительного статуса документа
* **Тип** (тип Структура) - описывает тип документа
* **Шаблон** (тип Булево) - признак того, что документ находится в составе пакета-шаблона

Структура **Идентификаторы**:

* **BoxId** - идентификатор ящика организации на сервере Диадока
* **LetterId** - идентификатор пакета в ящике организации на сервере Диадока
* **DocumentId** - идентификатор документа в ящике организации на сервере Диадока
* **ДокументЭДО** - ссылка на описание электронного документа в базе 1С
* **ПакетЭДО** - ссылка на описание электронного пакета в базе 1С

Структура **Отправитель / Получатель**:

    * **BoxId** - идентификатор ящика отправителя/получателя пакета на сервере Диадока
    * **ОрганизацияЭДО** - ссылка на организацию / контрагента в 1С
    * **Организация** - ссылка на сопоставленную организацию / контрагента в базе 1С
    * **FNSParticipantId** - ФНС идентификатор участника электронного документоооборота
    * **DepartmentId** - идентификатор подразделения участника электронного документоооборота

Структура **ПараметрыШаблона**:

    * **MessageFromBoxId** - идентификатор ящика отправителя документов, созданных на основе шаблонов
    * **MessageToBoxId** - идентификатор ящика получателя документов, созданных на основе шаблонов
    * **MessageToDepartmentId** - идентификатор подразделения получателя сообщения, которое будет создано на основе отправляемого шаблона
    * **EditingSettingId** - идентификатор настройки редактирования содержимого документа
    * **LockMode** - режим блокировки сообщения с шаблонами, доступны значения:

        * *None* - блокировка не производится
        * *Send* - для документов пакета возможна только совместная отправка. Свойства залоченности работают по аналогии с закрытыми пакетами (режимом Full) и сохраняются до отправки пакета. После отправки пакета документов все ограничения на подокументную обработку снимаются.
        * *Full* - документы сообщения будут отправлены закрытым пакетом. В таком пакете любая операция применяется ко всем документам сразу.

Структура **РезультатАнализа**:

    * **АнализПроведен** (тип Булево) - признак завершения анализа документа
    * **ТекстОшибки** (тип Строка) - любое строковое значение ошибки при выполнении анализа. Определяется в подключаемом модуле. Отображается в колонке "Ошибки проверки" в списке документов. Видимость ограничена 150 символами.
    * **ТребуемоеДействиеВ1С** (тип Строка 50) - строковое представление действия в 1С после анализа. Обрабатывается в событии :doc:`ВыполнитьТребуемоеДействие <../func/pm/Vypolnit'_Trebuyemoye_Deystviye>`
    * **ТребуемоеДействиеВДД** (тип Строка 50) - строковое представление действия для отправки на сервер Диадока после анализа. Обрабатывается при нажатии на кнопку на форме "Отправить готовые ответы". Возможные варианты:

        * *Подписать*
        * *ОтказатьВПодписи*
        * *ЗапроситьУточнение*
        * *Аннулировать*
        * *ОтказатьВАннулировании*

Структура **Реквизиты**:

* **Дата** - дата документа-основания исходящего пакета / дата первого документа входящего пакета
* **Номер** - номер документа-основания исходящего пакета / номер первого документа входящего пакета
* **Сумма** - сумма документа-основания исходящего пакета / сумма первого документа входящего пакета




Структура **СлужебнаяИнформация**:

    * **ОтложеннаяОтправка** - признак того, что пакет сохранен на сервере Диадока без отправки контрагенту
    * **ЗашифрованныйПакет** - признак того, что пакет содержит зашифрованные документы
